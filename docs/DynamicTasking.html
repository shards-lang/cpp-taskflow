<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cookbook &raquo; Dynamic Tasking | Taskflow QuickStart</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://taskflow.github.io"><img src="taskflow_logo.png" alt="" />Taskflow</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">QuickStart</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Handbook</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="Cookbook.html">Cookbook</a> &raquo;</span>
          Dynamic Tasking
        </h1>
        <nav class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li><a href="#CreateASubflow">Create a Subflow</a></li>
            <li><a href="#JoinASubflow">Join a Subflow</a></li>
            <li><a href="#DetachASubflow">Detach a Subflow</a></li>
            <li><a href="#CreateANestedSubflow">Create a Nested Subflow</a></li>
          </ul>
        </nav>
<p>It is very common for a parallel program to spawn task dependency graphs at runtime. In Taskflow, we call this <em>dynamic tasking</em>.</p><section id="CreateASubflow"><h2><a href="#CreateASubflow">Create a Subflow</a></h2><p>Dynamic tasks are those created during the execution of a graph. These tasks are spawned from a parent task and are grouped together to a <em>subflow</em> dependency graph. Taskflow has an unified interface for static and dynamic tasking. To create a subflow, emplace a callable that takes an argument of type <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a>. A <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a> object will be created and forwarded to the execution context of the task. All methods you find in <a href="classtf_1_1Taskflow.html" class="m-doc">tf::<wbr />Taskflow</a> are applicable for <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a>.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task A</span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task C</span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;D&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task D</span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">subflow</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B1&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// dynamic task B1</span>
<span class="mi">10</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// dynamic task B2</span>
<span class="mi">11</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B3&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// dynamic task B3</span>
<span class="mi">12</span><span class="o">:</span><span class="w">   </span><span class="n">B1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span><span class="w">  </span><span class="c1">// B1 runs bofore B3</span>
<span class="mi">13</span><span class="o">:</span><span class="w">   </span><span class="n">B2</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span><span class="w">  </span><span class="c1">// B2 runs before B3</span>
<span class="mi">14</span><span class="o">:</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">15</span><span class="o">:</span><span class="w"></span>
<span class="mi">16</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">);</span><span class="w">  </span><span class="c1">// B runs after A</span>
<span class="mi">17</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">C</span><span class="p">);</span><span class="w">  </span><span class="c1">// C runs after A</span>
<span class="mi">18</span><span class="o">:</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w">  </span><span class="c1">// D runs after B</span>
<span class="mi">19</span><span class="o">:</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w">  </span><span class="c1">// D runs after C</span>
<span class="mi">20</span><span class="o">:</span><span class="w"></span>
<span class="mi">21</span><span class="o">:</span><span class="w"> </span><span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">get</span><span class="p">();</span><span class="w">  </span><span class="c1">// execute the graph to spawn the subflow</span>
<span class="mi">22</span><span class="o">:</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span><span class="w">      </span><span class="c1">// dump the taskflow to a DOT format</span></pre><div><div class="m-graph"><svg style="width: 37.200rem; height: 22.800rem;" viewBox="0.00 0.00 372.00 228.00">
<g transform="scale(1 1) rotate(0) translate(4 224)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffee9781810</title>
<polygon points="8,-8 8,-212 356,-212 356,-8 8,-8"/>
<text text-anchor="middle" x="182" y="-200" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Taskflow</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7f9866c01b70</title>
<polygon points="16,-60 16,-185 266,-185 266,-60 16,-60"/>
<text text-anchor="middle" x="141" y="-173" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: B</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01820</title>
<ellipse cx="141" cy="-34" rx="27" ry="18"/>
<text text-anchor="middle" x="141" y="-31.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01b70</title>
<ellipse cx="231" cy="-88" rx="27" ry="18"/>
<text text-anchor="middle" x="231" y="-85.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>p0x7f9866c01820&#45;&gt;p0x7f9866c01b70</title>
<path d="M161.4224,-46.2534C173.3897,-53.4338 188.7024,-62.6215 201.9143,-70.5486"/>
<polygon points="200.2827,-73.6513 210.6584,-75.7951 203.8842,-67.6488 200.2827,-73.6513"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01930</title>
<ellipse cx="231" cy="-34" rx="27" ry="18"/>
<text text-anchor="middle" x="231" y="-31.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>p0x7f9866c01820&#45;&gt;p0x7f9866c01930</title>
<path d="M168.003,-34C176.0277,-34 184.9665,-34 193.5309,-34"/>
<polygon points="193.7051,-37.5001 203.705,-34 193.705,-30.5001 193.7051,-37.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866c01a40</title>
<ellipse cx="321" cy="-61" rx="27" ry="18"/>
<text text-anchor="middle" x="321" y="-58.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>p0x7f9866c01b70&#45;&gt;p0x7f9866c01a40</title>
<path d="M256.07,-80.479C265.5102,-77.6469 276.4169,-74.3749 286.564,-71.3308"/>
<polygon points="287.803,-74.6133 296.3755,-68.3874 285.7915,-67.9085 287.803,-74.6133"/>
</g>
<g class="m-edge">
<title>p0x7f9866c01930&#45;&gt;p0x7f9866c01a40</title>
<path d="M256.07,-41.521C265.5102,-44.3531 276.4169,-47.6251 286.564,-50.6692"/>
<polygon points="285.7915,-54.0915 296.3755,-53.6126 287.803,-47.3867 285.7915,-54.0915"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866d01880</title>
<ellipse cx="51" cy="-140" rx="27" ry="18"/>
<text text-anchor="middle" x="51" y="-137.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7f9866d01ac0</title>
<ellipse cx="141" cy="-88" rx="27" ry="18"/>
<text text-anchor="middle" x="141" y="-85.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7f9866d01880&#45;&gt;p0x7f9866d01ac0</title>
<path d="M71.4224,-128.2004C83.3055,-121.3346 98.4869,-112.5631 111.6349,-104.9665"/>
<polygon points="113.4392,-107.9663 120.3469,-99.9329 109.9372,-101.9052 113.4392,-107.9663"/>
</g>
<g class="m-edge">
<title>p0x7f9866d01ac0&#45;&gt;p0x7f9866c01b70</title>
<path d="M168.003,-88C176.0277,-88 184.9665,-88 193.5309,-88"/>
<polygon points="193.7051,-91.5001 203.705,-88 193.705,-84.5001 193.7051,-91.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7f9866d019a0</title>
<ellipse cx="51" cy="-86" rx="27" ry="18"/>
<text text-anchor="middle" x="51" y="-83.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7f9866d019a0&#45;&gt;p0x7f9866d01ac0</title>
<path d="M78.003,-86.6001C86.0277,-86.7784 94.9665,-86.977 103.5309,-87.1674"/>
<polygon points="103.6297,-90.6703 113.705,-87.3934 103.7853,-83.672 103.6297,-90.6703"/>
</g>
</g>
</svg>
</div></div><p>Debrief:</p><ul><li>Lines 1-2 create a taskflow and an executor</li><li>Lines 4-6 create three tasks, A, C, and D</li><li>Lines 8-14 create a task B that spawns a task dependency graph of three tasks B1, B2, and B3</li><li>Lines 16-19 add dependencies among A, B, C, and D</li><li>Line 21 submits the graph to an executor and waits until it finishes</li><li>Line 22 dumps the entire task dependency graph</li></ul><p>Lines 8-14 are the main block to enable dynamic tasking. Taskflow uses a <a href="https://en.cppreference.com/w/cpp/utility/variant">std::<wbr />variant</a> date type to unify the interface of static tasking and dynamic tasking. The runtime will create a <a href="classtf_1_1Subflow.html" class="m-doc">tf::<wbr />Subflow</a> passing it to task B, and spawn a dependency graph as described by the associated callable. This new subflow graph will be added to the topology of its parent task B. Due to the property of dynamic tasking, we cannot dump its structure before execution. We will need to run the graph first to spawn the graph and then call <a href="classtf_1_1Taskflow.html#ac433018262e44b12c4cc9f0c4748d758" class="m-doc">tf::<wbr />Taskflow::<wbr />dump</a>.</p></section><section id="JoinASubflow"><h2><a href="#JoinASubflow">Join a Subflow</a></h2><p>By default, a subflow joins its parent task when the program leaves its execution context. All nodes of zero outgoing edges in the subflow precede its parent task. You can explicitly join a subflow within its execution context to carry out recursive patterns. A famous implementation is fibonacci recursion.</p><pre class="m-code"><span class="kt">int</span><span class="w"> </span><span class="nf">spawn</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">res1</span><span class="p">,</span><span class="w"> </span><span class="n">res2</span><span class="p">;</span><span class="w"></span>
<span class="w">  </span><span class="n">sbf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="n">res1</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">res1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">sbf</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">sbf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="n">res2</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">res2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">sbf</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="n">sbf</span><span class="p">.</span><span class="n">join</span><span class="p">();</span><span class="w">    </span><span class="c1">// join to materialize the subflow immediately</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">res1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">res2</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
<span class="w">  </span>
<span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([</span><span class="o">&amp;</span><span class="n">res</span><span class="p">]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">  </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">spawn</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">sbf</span><span class="p">);</span><span class="w">  </span>
<span class="p">});</span><span class="w"></span>

<span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w"></span></pre><p>The code above computes the fifth fibonacci number using recursive subflow. Calling <a href="classtf_1_1Subflow.html#a59fcac1323e70d920088dd37bd0be245" class="m-doc">tf::<wbr />Subflow::<wbr />join</a> <em>immediately</em> materializes the subflow by executing all associated tasks to recursively compute fibonacci numbers. The taskflow graph is shown below:</p><div class="m-graph"><svg style="width: 67.000rem; height: 52.500rem;" viewBox="0.00 0.00 670.00 525.00">
<g transform="scale(1 1) rotate(0) translate(4 521)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffd972c0cd0</title>
<polygon points="8,-8 8,-509 654,-509 654,-8 8,-8"/>
<text text-anchor="middle" x="331" y="-497" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Taskflow: fibonacci</text>
</g>
<g class="m-cluster">
<title>cluster_p0xa445c0</title>
<polygon points="16,-16 16,-482 646,-482 646,-16 16,-16"/>
<text text-anchor="middle" x="331" y="-470" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 5</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000b90</title>
<polygon points="252,-88 252,-455 638,-455 638,-88 252,-88"/>
<text text-anchor="middle" x="445" y="-443" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 4</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe910000b90</title>
<polygon points="410,-160 410,-428 630,-428 630,-160 410,-160"/>
<text text-anchor="middle" x="520" y="-416" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 3</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000fe0</title>
<polygon points="480,-232 480,-401 622,-401 622,-232 480,-232"/>
<text text-anchor="middle" x="551" y="-389" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 2</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe910000c48</title>
<polygon points="260,-160 260,-303 402,-303 402,-160 260,-160"/>
<text text-anchor="middle" x="331" y="-291" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 2</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000c48</title>
<polygon points="24,-88 24,-330 244,-330 244,-88 24,-88"/>
<text text-anchor="middle" x="134" y="-318" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 3</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fe918000d00</title>
<polygon points="94,-160 94,-303 236,-303 236,-160 94,-160"/>
<text text-anchor="middle" x="165" y="-291" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: 2</text>
</g>
<g class="m-node m-flat">
<title>p0xa445c0</title>
<ellipse cx="248" cy="-42" rx="27" ry="18"/>
<text text-anchor="middle" x="248" y="-39.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">5</text>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000b90</title>
<ellipse cx="331" cy="-114" rx="27" ry="18"/>
<text text-anchor="middle" x="331" y="-111.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">4</text>
</g>
<g class="m-edge">
<title>p0x7fe918000b90&#45;&gt;p0xa445c0</title>
<path d="M314.2037,-99.4297C302.2002,-89.017 285.8613,-74.8435 272.4189,-63.1827"/>
<polygon points="274.3354,-60.2118 264.4881,-56.3029 269.7485,-65.4996 274.3354,-60.2118"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000b90</title>
<ellipse cx="445" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="445" y="-183.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">3</text>
</g>
<g class="m-edge">
<title>p0x7fe910000b90&#45;&gt;p0x7fe918000b90</title>
<path d="M426.0517,-173.1597C419.7104,-168.9182 412.5808,-164.2096 406,-160 390.9059,-150.3447 373.8972,-139.8794 359.8977,-131.3738"/>
<polygon points="361.5497,-128.2824 351.183,-126.0956 357.9233,-134.2699 361.5497,-128.2824"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000fe0</title>
<ellipse cx="517" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="517" y="-255.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-edge">
<title>p0x7fe918000fe0&#45;&gt;p0x7fe910000b90</title>
<path d="M501.7307,-242.7307C491.803,-232.803 478.6847,-219.6847 467.5637,-208.5637"/>
<polygon points="469.7933,-205.8436 460.2473,-201.2473 464.8436,-210.7933 469.7933,-205.8436"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918001150</title>
<ellipse cx="587" cy="-356" rx="27" ry="18"/>
<text text-anchor="middle" x="587" y="-353.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918001150&#45;&gt;p0x7fe918000fe0</title>
<path d="M575.1255,-339.3756C563.9964,-323.795 547.2211,-300.3095 534.5482,-282.5674"/>
<polygon points="537.3597,-280.4819 528.6992,-274.3788 531.6635,-284.5506 537.3597,-280.4819"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918001208</title>
<ellipse cx="515" cy="-356" rx="27" ry="18"/>
<text text-anchor="middle" x="515" y="-353.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-edge">
<title>p0x7fe918001208&#45;&gt;p0x7fe918000fe0</title>
<path d="M515.3762,-337.5669C515.6714,-323.1034 516.0873,-302.7239 516.4243,-286.2111"/>
<polygon points="519.9274,-286.0887 516.6323,-276.0193 512.9289,-285.9458 519.9274,-286.0887"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918001098</title>
<ellipse cx="445" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="445" y="-255.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918001098&#45;&gt;p0x7fe910000b90</title>
<path d="M445,-239.8314C445,-232.131 445,-222.9743 445,-214.4166"/>
<polygon points="448.5001,-214.4132 445,-204.4133 441.5001,-214.4133 448.5001,-214.4132"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000c48</title>
<ellipse cx="331" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="331" y="-183.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-edge">
<title>p0x7fe910000c48&#45;&gt;p0x7fe918000b90</title>
<path d="M331,-167.8314C331,-160.131 331,-150.9743 331,-142.4166"/>
<polygon points="334.5001,-142.4132 331,-132.4133 327.5001,-142.4133 334.5001,-142.4132"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000d00</title>
<ellipse cx="367" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="367" y="-255.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7fe910000d00&#45;&gt;p0x7fe910000c48</title>
<path d="M358.2854,-240.5708C354.0403,-232.0807 348.8464,-221.6929 344.1337,-212.2674"/>
<polygon points="347.237,-210.6477 339.6343,-203.2687 340.976,-213.7782 347.237,-210.6477"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe910000db8</title>
<ellipse cx="295" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="295" y="-255.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-edge">
<title>p0x7fe910000db8&#45;&gt;p0x7fe910000c48</title>
<path d="M303.7146,-240.5708C307.9597,-232.0807 313.1536,-221.6929 317.8663,-212.2674"/>
<polygon points="321.024,-213.7782 322.3657,-203.2687 314.763,-210.6477 321.024,-213.7782"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000c48</title>
<ellipse cx="166" cy="-114" rx="27" ry="18"/>
<text text-anchor="middle" x="166" y="-111.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">3</text>
</g>
<g class="m-edge">
<title>p0x7fe918000c48&#45;&gt;p0xa445c0</title>
<path d="M182.5939,-99.4297C194.3754,-89.0851 210.384,-75.0286 223.6145,-63.4116"/>
<polygon points="226.2256,-65.7767 231.4308,-56.5486 221.607,-60.5166 226.2256,-65.7767"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000d00</title>
<ellipse cx="166" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="166" y="-183.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">2</text>
</g>
<g class="m-edge">
<title>p0x7fe918000d00&#45;&gt;p0x7fe918000c48</title>
<path d="M166,-167.8314C166,-160.131 166,-150.9743 166,-142.4166"/>
<polygon points="169.5001,-142.4132 166,-132.4133 162.5001,-142.4133 169.5001,-142.4132"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000e70</title>
<ellipse cx="201" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="201" y="-255.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918000e70&#45;&gt;p0x7fe918000d00</title>
<path d="M192.5275,-240.5708C188.4003,-232.0807 183.3507,-221.6929 178.7689,-212.2674"/>
<polygon points="181.9143,-210.7322 174.3945,-203.2687 175.6187,-213.7926 181.9143,-210.7322"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000f28</title>
<ellipse cx="129" cy="-258" rx="27" ry="18"/>
<text text-anchor="middle" x="129" y="-255.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">0</text>
</g>
<g class="m-edge">
<title>p0x7fe918000f28&#45;&gt;p0x7fe918000d00</title>
<path d="M137.7685,-240.937C142.1279,-232.4537 147.4953,-222.0092 152.3753,-212.513"/>
<polygon points="155.5797,-213.9348 157.0374,-203.4407 149.3537,-210.7352 155.5797,-213.9348"/>
</g>
<g class="m-node m-flat">
<title>p0x7fe918000db8</title>
<ellipse cx="59" cy="-186" rx="27" ry="18"/>
<text text-anchor="middle" x="59" y="-183.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">1</text>
</g>
<g class="m-edge">
<title>p0x7fe918000db8&#45;&gt;p0x7fe918000c48</title>
<path d="M75.3559,-171.4818C79.9768,-167.603 85.0873,-163.5153 90,-160 104.7132,-149.4718 121.9001,-138.9337 136.2044,-130.6052"/>
<polygon points="138.207,-133.4912 145.1331,-125.4736 134.7189,-127.4221 138.207,-133.4912"/>
</g>
</g>
</svg>
</div><p>Our implementation to join subflows is <em>recursive</em> in order to preserve the thread context in each subflow task. Having a deep recursion of subflows may cause stack overflow.</p></section><section id="DetachASubflow"><h2><a href="#DetachASubflow">Detach a Subflow</a></h2><p>In contract to joined subflow, you can detach a subflow from its parent task, allowing its execution to flow independently.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task A</span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;C&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task C</span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;D&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// static task D</span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">subflow</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B1&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// dynamic task B1</span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B2&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// dynamic task B2</span>
<span class="mi">10</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">B3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">subflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B3&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">// dynamic task B3</span>
<span class="mi">11</span><span class="o">:</span><span class="w">   </span><span class="n">B1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span><span class="w">    </span><span class="c1">// B1 runs bofore B3</span>
<span class="mi">12</span><span class="o">:</span><span class="w">   </span><span class="n">B2</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B3</span><span class="p">);</span><span class="w">    </span><span class="c1">// B2 runs before B3</span>
<span class="mi">13</span><span class="o">:</span><span class="w">   </span><span class="n">subflow</span><span class="p">.</span><span class="n">detach</span><span class="p">();</span><span class="w">  </span><span class="c1">// detach this subflow</span>
<span class="mi">14</span><span class="o">:</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;B&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">15</span><span class="o">:</span><span class="w"></span>
<span class="mi">16</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">B</span><span class="p">);</span><span class="w">  </span><span class="c1">// B runs after A</span>
<span class="mi">17</span><span class="o">:</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">C</span><span class="p">);</span><span class="w">  </span><span class="c1">// C runs after A</span>
<span class="mi">18</span><span class="o">:</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w">  </span><span class="c1">// D runs after B</span>
<span class="mi">19</span><span class="o">:</span><span class="w"> </span><span class="n">C</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">D</span><span class="p">);</span><span class="w">  </span><span class="c1">// D runs after C</span>
<span class="mi">20</span><span class="o">:</span><span class="w"></span>
<span class="mi">21</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="w"> </span><span class="n">executor</span><span class="p">;</span><span class="w"></span>
<span class="mi">22</span><span class="o">:</span><span class="w"> </span><span class="n">executor</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w">       </span><span class="c1">// execute the graph to spawn the subflow</span>
<span class="mi">22</span><span class="o">:</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span><span class="w">            </span><span class="c1">// dump the taskflow to DOT format</span></pre><p>The figure below demonstrates a detached subflow based on the previous example. A detached subflow will eventually join the topology of its parent task.</p><div class="m-graph"><svg style="width: 31.600rem; height: 26.600rem;" viewBox="0.00 0.00 316.00 266.00">
<g transform="scale(1 1) rotate(0) translate(4 262)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffeecc59810</title>
<polygon points="8,-8 8,-250 300,-250 300,-8 8,-8"/>
<text text-anchor="middle" x="154" y="-238" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Taskflow</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fdc0dc02b60</title>
<polygon points="150,-80 150,-223 292,-223 292,-80 150,-80"/>
<text text-anchor="middle" x="221" y="-211" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: B</text>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0dc02830</title>
<ellipse cx="78" cy="-178" rx="27" ry="18"/>
<text text-anchor="middle" x="78" y="-175.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0dc02b60</title>
<ellipse cx="43" cy="-106" rx="27" ry="18"/>
<text text-anchor="middle" x="43" y="-103.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>p0x7fdc0dc02830&#45;&gt;p0x7fdc0dc02b60</title>
<path d="M69.5275,-160.5708C65.4003,-152.0807 60.3507,-141.6929 55.7689,-132.2674"/>
<polygon points="58.9143,-130.7322 51.3945,-123.2687 52.6187,-133.7926 58.9143,-130.7322"/>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0dc02940</title>
<ellipse cx="115" cy="-106" rx="27" ry="18"/>
<text text-anchor="middle" x="115" y="-103.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>p0x7fdc0dc02830&#45;&gt;p0x7fdc0dc02940</title>
<path d="M86.7685,-160.937C91.1279,-152.4537 96.4953,-142.0092 101.3753,-132.513"/>
<polygon points="104.5797,-133.9348 106.0374,-123.4407 98.3537,-130.7352 104.5797,-133.9348"/>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0dc02a50</title>
<ellipse cx="79" cy="-34" rx="27" ry="18"/>
<text text-anchor="middle" x="79" y="-31.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>p0x7fdc0dc02b60&#45;&gt;p0x7fdc0dc02a50</title>
<path d="M51.7146,-88.5708C55.9597,-80.0807 61.1536,-69.6929 65.8663,-60.2674"/>
<polygon points="69.024,-61.7782 70.3657,-51.2687 62.763,-58.6477 69.024,-61.7782"/>
</g>
<g class="m-edge">
<title>p0x7fdc0dc02940&#45;&gt;p0x7fdc0dc02a50</title>
<path d="M106.2854,-88.5708C102.0403,-80.0807 96.8464,-69.6929 92.1337,-60.2674"/>
<polygon points="95.237,-58.6477 87.6343,-51.2687 88.976,-61.7782 95.237,-58.6477"/>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0de00120</title>
<ellipse cx="257" cy="-178" rx="27" ry="18"/>
<text text-anchor="middle" x="257" y="-175.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0de00360</title>
<ellipse cx="222" cy="-106" rx="27" ry="18"/>
<text text-anchor="middle" x="222" y="-103.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7fdc0de00120&#45;&gt;p0x7fdc0de00360</title>
<path d="M248.5275,-160.5708C244.4003,-152.0807 239.3507,-141.6929 234.7689,-132.2674"/>
<polygon points="237.9143,-130.7322 230.3945,-123.2687 231.6187,-133.7926 237.9143,-130.7322"/>
</g>
<g class="m-node m-flat">
<title>p0x7fdc0de00240</title>
<ellipse cx="185" cy="-178" rx="27" ry="18"/>
<text text-anchor="middle" x="185" y="-175.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7fdc0de00240&#45;&gt;p0x7fdc0de00360</title>
<path d="M193.7685,-160.937C198.1279,-152.4537 203.4953,-142.0092 208.3753,-132.513"/>
<polygon points="211.5797,-133.9348 213.0374,-123.4407 205.3537,-130.7352 211.5797,-133.9348"/>
</g>
</g>
</svg>
</div><p>Detached subflow becomes an independent graph attached to the top-most taskflow. Running a taskflow multiple times will accumulate all detached tasks in the graph. For example, running the above taskflow 5 times results in a total of 19 tasks.</p><pre class="m-code"><span class="n">executor</span><span class="p">.</span><span class="n">run_n</span><span class="p">(</span><span class="n">taskflow</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">).</span><span class="n">wait</span><span class="p">();</span><span class="w"></span>
<span class="n">assert</span><span class="p">(</span><span class="n">taskflow</span><span class="p">.</span><span class="n">num_tasks</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">19</span><span class="p">);</span><span class="w"></span>
<span class="n">taskflow</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span><span class="w"></span></pre><p>The dumped graph is shown as follows:</p><div class="m-graph"><svg style="width: 84.500rem; height: 18.800rem;" viewBox="0.00 0.00 845.00 188.00">
<g transform="scale(1 1) rotate(0) translate(4 184)">
<title>Taskflow</title>
<g class="m-node m-flat">
<title>p0x934ff0</title>
<ellipse cx="63" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="63" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-node m-flat">
<title>p0x935218</title>
<ellipse cx="27" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B</text>
</g>
<g class="m-edge">
<title>p0x934ff0&#45;&gt;p0x935218</title>
<path d="M54.2854,-144.5708C50.0403,-136.0807 44.8464,-125.6929 40.1337,-116.2674"/>
<polygon points="43.237,-114.6477 35.6343,-107.2687 36.976,-117.7782 43.237,-114.6477"/>
</g>
<g class="m-node m-flat">
<title>p0x9350a8</title>
<ellipse cx="99" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="99" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">C</text>
</g>
<g class="m-edge">
<title>p0x934ff0&#45;&gt;p0x9350a8</title>
<path d="M71.7146,-144.5708C75.9597,-136.0807 81.1536,-125.6929 85.8663,-116.2674"/>
<polygon points="89.024,-117.7782 90.3657,-107.2687 82.763,-114.6477 89.024,-117.7782"/>
</g>
<g class="m-node m-flat">
<title>p0x935160</title>
<ellipse cx="63" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="63" y="-15.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">D</text>
</g>
<g class="m-edge">
<title>p0x935218&#45;&gt;p0x935160</title>
<path d="M35.7146,-72.5708C39.9597,-64.0807 45.1536,-53.6929 49.8663,-44.2674"/>
<polygon points="53.024,-45.7782 54.3657,-35.2687 46.763,-42.6477 53.024,-45.7782"/>
</g>
<g class="m-edge">
<title>p0x9350a8&#45;&gt;p0x935160</title>
<path d="M90.2854,-72.5708C86.0403,-64.0807 80.8464,-53.6929 76.1337,-44.2674"/>
<polygon points="79.237,-42.6477 71.6343,-35.2687 72.976,-45.7782 79.237,-42.6477"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd564000b90</title>
<ellipse cx="153" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="153" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fd564000d00</title>
<ellipse cx="207" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="207" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7fd564000b90&#45;&gt;p0x7fd564000d00</title>
<path d="M165.2534,-145.6621C172.1577,-136.4564 180.9177,-124.7764 188.6285,-114.4953"/>
<polygon points="191.595,-116.3733 194.7951,-106.2733 185.995,-112.1733 191.595,-116.3733"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd564000c48</title>
<ellipse cx="225" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="225" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7fd564000c48&#45;&gt;p0x7fd564000d00</title>
<path d="M220.5506,-144.2022C218.5602,-136.2406 216.1668,-126.6671 213.9489,-117.7957"/>
<polygon points="217.2816,-116.6951 211.4606,-107.8425 210.4906,-118.3929 217.2816,-116.6951"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000b90</title>
<ellipse cx="306" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="306" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000d00</title>
<ellipse cx="315" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="315" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7fd55c000b90&#45;&gt;p0x7fd55c000d00</title>
<path d="M308.2711,-143.8314C309.2336,-136.131 310.3782,-126.9743 311.4479,-118.4166"/>
<polygon points="314.9309,-118.7702 312.6983,-108.4133 307.9849,-117.9019 314.9309,-118.7702"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000c48</title>
<ellipse cx="378" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="378" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7fd55c000c48&#45;&gt;p0x7fd55c000d00</title>
<path d="M364.3299,-146.3771C355.8266,-136.659 344.7387,-123.987 335.2292,-113.1191"/>
<polygon points="337.8625,-110.8135 328.6434,-105.5924 332.5944,-115.423 337.8625,-110.8135"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000db8</title>
<ellipse cx="450" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="450" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000f28</title>
<ellipse cx="486" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="486" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7fd55c000db8&#45;&gt;p0x7fd55c000f28</title>
<path d="M458.7146,-144.5708C462.9597,-136.0807 468.1536,-125.6929 472.8663,-116.2674"/>
<polygon points="476.024,-117.7782 477.3657,-107.2687 469.763,-114.6477 476.024,-117.7782"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000e70</title>
<ellipse cx="522" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="522" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7fd55c000e70&#45;&gt;p0x7fd55c000f28</title>
<path d="M513.2854,-144.5708C509.0403,-136.0807 503.8464,-125.6929 499.1337,-116.2674"/>
<polygon points="502.237,-114.6477 494.6343,-107.2687 495.976,-117.7782 502.237,-114.6477"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c000fe0</title>
<ellipse cx="594" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="594" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c001150</title>
<ellipse cx="630" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="630" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7fd55c000fe0&#45;&gt;p0x7fd55c001150</title>
<path d="M602.7146,-144.5708C606.9597,-136.0807 612.1536,-125.6929 616.8663,-116.2674"/>
<polygon points="620.024,-117.7782 621.3657,-107.2687 613.763,-114.6477 620.024,-117.7782"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c001098</title>
<ellipse cx="666" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="666" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7fd55c001098&#45;&gt;p0x7fd55c001150</title>
<path d="M657.2854,-144.5708C653.0403,-136.0807 647.8464,-125.6929 643.1337,-116.2674"/>
<polygon points="646.237,-114.6477 638.6343,-107.2687 639.976,-117.7782 646.237,-114.6477"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c001208</title>
<ellipse cx="738" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="738" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c001378</title>
<ellipse cx="774" cy="-90" rx="27" ry="18"/>
<text text-anchor="middle" x="774" y="-87.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B3</text>
</g>
<g class="m-edge">
<title>p0x7fd55c001208&#45;&gt;p0x7fd55c001378</title>
<path d="M746.7146,-144.5708C750.9597,-136.0807 756.1536,-125.6929 760.8663,-116.2674"/>
<polygon points="764.024,-117.7782 765.3657,-107.2687 757.763,-114.6477 764.024,-117.7782"/>
</g>
<g class="m-node m-flat">
<title>p0x7fd55c0012c0</title>
<ellipse cx="810" cy="-162" rx="27" ry="18"/>
<text text-anchor="middle" x="810" y="-159.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">B2</text>
</g>
<g class="m-edge">
<title>p0x7fd55c0012c0&#45;&gt;p0x7fd55c001378</title>
<path d="M801.2854,-144.5708C797.0403,-136.0807 791.8464,-125.6929 787.1337,-116.2674"/>
<polygon points="790.237,-114.6477 782.6343,-107.2687 783.976,-117.7782 790.237,-114.6477"/>
</g>
</g>
</svg>
</div></section><section id="CreateANestedSubflow"><h2><a href="#CreateANestedSubflow">Create a Nested Subflow</a></h2><p>A subflow can be nested or recursive. You can create another subflow from the execution of a subflow and so on.</p><pre class="m-code"><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Taskflow</span><span class="w"> </span><span class="n">taskflow</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">3</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf</span><span class="p">){</span><span class="w"></span>
<span class="w"> </span><span class="mi">4</span><span class="o">:</span><span class="w">   </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;A spawns A1 &amp; subflow A2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">5</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sbf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w"> </span><span class="mi">6</span><span class="o">:</span><span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;subtask A1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w"> </span><span class="mi">7</span><span class="o">:</span><span class="w">   </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A1&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w"> </span><span class="mi">8</span><span class="o">:</span><span class="w"></span>
<span class="w"> </span><span class="mi">9</span><span class="o">:</span><span class="w">   </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sbf</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">(</span><span class="n">tf</span><span class="o">::</span><span class="n">Subflow</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sbf2</span><span class="p">){</span><span class="w"></span>
<span class="mi">10</span><span class="o">:</span><span class="w">     </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;A2 spawns A2_1 &amp; A2_2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="mi">11</span><span class="o">:</span><span class="w">     </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A2_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sbf2</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="mi">12</span><span class="o">:</span><span class="w">       </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;subtask A2_1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="mi">13</span><span class="o">:</span><span class="w">     </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A2_1&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">14</span><span class="o">:</span><span class="w">     </span><span class="n">tf</span><span class="o">::</span><span class="n">Task</span><span class="w"> </span><span class="n">A2_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sbf2</span><span class="p">.</span><span class="n">emplace</span><span class="p">([]</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="mi">15</span><span class="o">:</span><span class="w">       </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;subtask A2_2</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"></span>
<span class="mi">16</span><span class="o">:</span><span class="w">     </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A2_2&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">17</span><span class="o">:</span><span class="w">     </span><span class="n">A2_1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">A2_2</span><span class="p">);</span><span class="w"></span>
<span class="mi">18</span><span class="o">:</span><span class="w">   </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A2&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">19</span><span class="o">:</span><span class="w">   </span><span class="n">A1</span><span class="p">.</span><span class="n">precede</span><span class="p">(</span><span class="n">A2</span><span class="p">);</span><span class="w"></span>
<span class="mi">20</span><span class="o">:</span><span class="w"> </span><span class="p">}).</span><span class="n">name</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="p">);</span><span class="w"></span>
<span class="mi">21</span><span class="o">:</span><span class="w"></span>
<span class="mi">22</span><span class="o">:</span><span class="w"> </span><span class="c1">// execute the graph to spawn the subflow</span>
<span class="mi">23</span><span class="o">:</span><span class="w"> </span><span class="n">tf</span><span class="o">::</span><span class="n">Executor</span><span class="p">().</span><span class="n">run</span><span class="p">(</span><span class="n">taskflow</span><span class="p">).</span><span class="n">get</span><span class="p">();</span><span class="w"></span>
<span class="mi">24</span><span class="o">:</span><span class="w"> </span><span class="n">taskflow</span><span class="p">.</span><span class="n">dump</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="p">);</span><span class="w"></span></pre><div class="m-graph"><svg style="width: 38.800rem; height: 21.100rem;" viewBox="0.00 0.00 388.00 211.00">
<g transform="scale(1 1) rotate(0) translate(4 207)">
<title>Taskflow</title>
<g class="m-cluster">
<title>cluster_p0x7ffeeca03810</title>
<polygon points="8,-8 8,-195 372,-195 372,-8 8,-8"/>
<text text-anchor="middle" x="190" y="-183" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Taskflow</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fbc40c02830</title>
<polygon points="16,-16 16,-168 364,-168 364,-16 16,-16"/>
<text text-anchor="middle" x="190" y="-156" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: A</text>
</g>
<g class="m-cluster">
<title>cluster_p0x7fbc40d00240</title>
<polygon points="24,-70 24,-141 274,-141 274,-70 24,-70"/>
<text text-anchor="middle" x="149" y="-129" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">Subflow: A2</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40c02830</title>
<ellipse cx="329" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="329" y="-93.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00120</title>
<ellipse cx="149" cy="-42" rx="27" ry="18"/>
<text text-anchor="middle" x="149" y="-39.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00240</title>
<ellipse cx="239" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="239" y="-93.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A2</text>
</g>
<g class="m-edge">
<title>p0x7fbc40d00120&#45;&gt;p0x7fbc40d00240</title>
<path d="M169.4224,-54.2534C181.3897,-61.4338 196.7024,-70.6215 209.9143,-78.5486"/>
<polygon points="208.2827,-81.6513 218.6584,-83.7951 211.8842,-75.6488 208.2827,-81.6513"/>
</g>
<g class="m-edge">
<title>p0x7fbc40d00240&#45;&gt;p0x7fbc40c02830</title>
<path d="M266.003,-96C274.0277,-96 282.9665,-96 291.5309,-96"/>
<polygon points="291.7051,-99.5001 301.705,-96 291.705,-92.5001 291.7051,-99.5001"/>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00360</title>
<ellipse cx="59" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="59" y="-93.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A2_1</text>
</g>
<g class="m-node m-flat">
<title>p0x7fbc40d00470</title>
<ellipse cx="149" cy="-96" rx="27" ry="18"/>
<text text-anchor="middle" x="149" y="-93.5" font-family="Helvetica,sans-Serif" font-size="10.00" fill="#000000">A2_2</text>
</g>
<g class="m-edge">
<title>p0x7fbc40d00360&#45;&gt;p0x7fbc40d00470</title>
<path d="M86.003,-96C94.0277,-96 102.9665,-96 111.5309,-96"/>
<polygon points="111.7051,-99.5001 121.705,-96 111.705,-92.5001 111.7051,-99.5001"/>
</g>
<g class="m-edge">
<title>p0x7fbc40d00470&#45;&gt;p0x7fbc40d00240</title>
<path d="M176.003,-96C184.0277,-96 192.9665,-96 201.5309,-96"/>
<polygon points="201.7051,-99.5001 211.705,-96 201.705,-92.5001 201.7051,-99.5001"/>
</g>
</g>
</svg>
</div><p>Debrief:</p><ul><li>Line 1 creates a taskflow object</li><li>Lines 3-20 create a task to spawn a subflow of two tasks A1 and A2</li><li>Lines 9-18 spawn another subflow of two tasks A2_1 and A2_2 out of its parent task A2</li><li>Lines 23-24 runs the graph asynchronously and dump its structure when it finishes</li></ul><p>Similarly, you can detach a nested subflow from its parent subflow. A detached subflow will run independently and eventually join the topology of its parent subflow.</p></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Taskflow handbook is part of the <a href="https://taskflow.github.io">Taskflow project</a>, copyright © <a href="https://tsung-wei-huang.github.io/">Dr. Tsung-Wei Huang</a>, 2018&ndash;2023.<br />Generated by <a href="https://doxygen.org/">Doxygen</a> 1.8.14 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
